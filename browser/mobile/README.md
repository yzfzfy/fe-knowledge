# 移动端开发

## 视口

用于显示 web 页面内容的区域。该区域使用 window.innerWidth 获取，在 pc 上和窄屏设备上是不同的。

### pc

视口区域就是可视区的大小。如果页面内容超出可视区范围，那么浏览器会提供滚动条以查看超出内容

### 窄屏设备

此时的视口区域不是并不是设备可视区，而是通常比可视区要大（通常是 980px）。之所以设置为 980px 是因为早期的页面都是为了 pc 上展示的，宽度一般较大，在手机上显示时希望尽可能展示更多的内容。同时为了在手机端一次性展示全部页面内容，会对页面进行缩放。

## 窄屏设备问题

当一个页面针对窄屏做优化时，上述对窄屏的优化就会有问题。如使用 media query 时，如果 media query 小于 980 时，设置的规则始终都不会匹配到

## 应对

针对上述问题，需要支持页面自身设置展示时的视口大小，以让规则生效。所以 Apple 首先引入了<meta name="viewport" content="" />标签,支持动态设置视口的属性。 width、initial-scale、maximum-scale、minimum-scale、user-scalable。
在 ios 10 上后三个属性已被禁用，官方认为不应该禁用用户缩放。[官方地址](https://webkit.org/blog/7367/new-interaction-behaviors-in-ios-10/)

## 多倍屏的出现（苹果 retina 屏）

多倍屏即页面开发中 1 像素的内容在真实硬件设备渲染时使用多于 1 像素渲染，如此渲染的结果就是消除锯齿展示，图像更清晰。他的本质是设备像素比大于 1。devicePixelRatio，常用简写 dpr。

设备像素比值=物理像素/逻辑像素

### 物理像素：就是设备出厂时已决定的不可更改的像素点数。常说的手机屏幕分辨率。

### 逻辑像素：代码开发中用到的 px 值。

## 多倍屏带来的问题: 代码开发中写的 1px 不再是真实设备渲染中的 1 像素，对于 2 倍屏就是页面中的 1px 是用 2x2 个像素点展示渲染，这就是 1 像素问题。

解决 1px 问题
设置 initial-scale=几倍屏的倒数;如 dpr 为 2 的屏设置为 0.5，那么页面中使用的像素数正好是设备的物理像素数，此时 css 中使用的 1px 就是真正的 1 像素。
使用 transform。缩放倍数也是根据 dpr 获得。

## 开发

移动端开发中通常设计师会已 iphone6 的尺寸出土，他的分辨率是 750\*1334，dpr=2。

使用 rem 单位。一般开发会设置一个基准的 rem 值，就是<html style="font-size:100px">，这就是 750 大小视口下的字体大小，适配其他屏幕需要动态修改 rem 的值。如 375 的视口时，此时的 rem 值为 50px。
使用 vw、vh 单位。将视口 100 等分，对于视口为 375 的屏幕，1vw 就是 3.75px。
使用 px，需要配合使用 webpack loader 在编译时根据配置将单位处理为 rem 或 vw， => 1vw 、=> 1rem
