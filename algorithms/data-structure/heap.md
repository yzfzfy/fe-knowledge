# 堆

## 定义

堆是用数组实现的完全二叉树，所以它没有使用父指针和子指针。堆根据堆属性来排序，堆属性决定了树中节点的位置。

堆需要满足下列性质

-   堆中某个节点的值总是不大于或不小于其父节点的值。
-   堆总是一棵完全二叉树。(在当前层级所有的节点都已经填满之前不允许开是下一层的填充)

堆分为两种：最大堆和最小堆，两者的差别在于节点的排序方式。最大堆中父节点的值比每一个子节点的值都要大，而最小堆中，父节点的值比每一个子节点的值都要小。这就是所谓的堆属性，并且这个属性对堆中的每个节点都成立。

```
    ⑩
   / \
  ⑦   ②
 / \
⑤   ①
```

上述的二叉树用堆表示就是`[10,7,2,5,1]`,是一个最大堆，10 比 7 和 2 都大。7 比 5 和 1 都大。
堆属性非常有用，因为堆常常被当做优先队列使用，因为可以快速地访问到“最重要”的元素。**堆的目的是将最大（或者最小）的节点放在最前面，从而快速的进行相关插入、删除操作。**

那么怎么查找节点的位置呢？节点在数组中的位置 index 和它的父节点以及子节点的索引之间有一个映射关系。如果 i 是节点的索引，那么下面的公式就给出了它的父节点和子节点在数组中的位置：

```js
parent(i) = floor((i - 1)/2)
left(i)   = 2i + 1
right(i)  = 2i + 2
```

验证

| node | array index | parent index | left child | right child |
| ---- | ----------- | ------------ | ---------- | ----------- |
| 10   | 0           | -1           | 1          | 2           |
| 7    | 1           | 0            | 3          | 4           |
| 2    | 2           | 0            | 5          | 6           |
| 5    | 3           | 1            | 7          | 8           |
| 1    | 4           | 1            | 9          | 10          |
